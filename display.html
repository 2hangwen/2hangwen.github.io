<html>

<head>
<style>
div {background:rgb(0,150,255);font-size:200%;align:center}
</style>
<title>良记录</title>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script>

function get_url(){
  //获取当前url地址
  var url=window.location.href;
 // $("div#daily").append(url+"<br/>");
  //判断传过来的参数是否为空
  if(url.split("?")[1].split("=")[1].length){
      //拼接出issues的api地址
       var issues_api_url="https://api.github.com/repos/hellooozhangwen/hellooozhangwen.github.io/issues/"+url.split("?")[1].split("=")[1];
     //  $("div#daily").append(issues_api_url);
       get_issues(issues_api_url);
  }else{
       $("div#daily").append("什么也没有");
  }
}

//获取api数据
function get_issues(www){
    console.log(www);
    $.get(www,function(data){
       //console.log(data);
       console.log(data["title"]);
       data["title"].length?$("title").eq(0).html(data["title"]):console.log("标题获取没有数据");
       console.log(data["body"]);
       data["body"].length?$("div#daily").append(data["body"]):console.log("内容获取没有数据");
       console.log(data["comments"]);
       $("div#daily").append("<hr/>"+data["comments"]+typeof(data["comments"])+"<hr/>");
       var comment_url=data["comments_url"];
       var count=data["comments"];
       console.log(comment_url+"*******");
       //获取留言地址为https://api.github.com/repos/hellooozhangwen/hellooozhangwen.github.io/issues/1/comments
       if(count == "number"  &&  count > 0){
              console.log(comment_url);
              $.get(comment_url,function(msg){
                for(i in msg){$("div").append(i+"------"+msg[i]+"<br/>")};
                /*
                console.log(msg.length);
                console.log(msg);
                //data["title"].length?$("title").eq(0).html(data["title"]):console.log("标题获取没有数据");
                console.log(msg[0][0]["body"]);
               // data["body"].length?$("div#daily").append(data["body"]):console.log("内容获取没有数据");
                console.log(msg[0][0]["comments"]);
               //$("div#daily").append("<hr/>"+data["comments"]+typeof(data["comments"])+"<hr/>")
               */
              });
       }
    })
}

$(function(){
   get_url();
})

</script>
</head>

<body>
<div id="daily">
</div>
</body>

</html>
