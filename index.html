<html>

<head>

    <title>hello zhangwen</title>
    <style>
       audio#mp3 {opacity:.3;position:fixed;top:95%;left:55%;}
       audio#mp3 ~span[id $= help] {display:none }
       audio#mp3:hover ~span[id $= help]{ display:block;position:absolute;position:fixed;top:95%;left:55%;color:orangered;font-size:150%}
       div#log a,div#log a p {background: linear-gradient(to right,#ffffff,blue);width:20%; }
    </style>
    <script  src="https://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script>
        show_jpg.i=-1;
        var change=true;
        show_jpg.items=["https://7xkszy.com2.z0.glb.qiniucdn.com/pics/vol/5253ca6da1604.jpg","https://7xkszy.com2.z0.glb.qiniucdn.com/pics/vol/579f80669ace2.jpg"]
        function  show_jpg(n) {
            if(show_jpg.i < 0){
                show_jpg.i=n;
            }
            if(change){
            $("#switch_jpg >img").prop("src",show_jpg.items[show_jpg.i]);
            --show_jpg.i;
            }
        }
        setTimeout("setInterval(show_jpg,5000,1)",30);
        
        function pause_show_jpg(){
            $("#switch_jpg > img").mouseover(function(){
               change=false;
               console.log(change);
               if(show_jpg.i == 0){
                   //alert("一时江湖多少事");
                   console.log("一时江湖多少事");
               }
            });
            $("#switch_jpg > img").mouseleave(function(){
               change=true;
               console.log(change);
               
            });
        }
        
        add_say.i=0;
       function add_say(){
          var get_say= $("div#talk > input#say").val();
           console.log(get_say);
           if(get_say.length){
               var tag="<h6>"+get_say+"</h6>";
               localStorage.setItem(add_say.i,tag);
               $("div#talk").append(tag);
                ++add_say.i;
           }
       }
       
       function read_mem(){
           for(i in localStorage){
              $("div#talk").append(localStorage.getItem(i));
           }
       }
       
       function add_log(path,text){
           var r=Math.random()*255;
           var g=Math.random()*255;
           var b=Math.random()*255;
           var rgb="rgb("+r+","+g+","+b+")";
           var tag="<br/><hr style='height:3px;border:none;border-top:3px double red' /><a href="+path+" style='text-decoration: none'>日志：  "+text+"</a><hr/>"
           $("div#log").append(tag);
       }
       
       $(document).ready(function(){
           //add_log();
           pause_show_jpg();
           read_issues();
       })

        function get_iframe_title(t) {
            var key = "iframe#" + t;
            var tit="";
            if(t == "tit"){
              var tit = $(key).contents().find("title").length ? $(key).contents().find("title").prop("text") : false;
            }
            if(t == "txt"){
                var txt= $(key).contents().find("pre").length ? $(key).contents().find("pre").text() : false;
                for (i in txt){
                    if(txt[i] == " "){break;}
                     tit+=txt[i]
                }
            }
            if (tit){
              // alert(tit);
               add_log($(key).prop("src"),tit);
               $(key).prop("src","");
            } 
        }
        
        function read_issues(){
            setTimeout("console.log('正在获取信息')",50000);
            var url="https://api.github.com/repos/hellooozhangwen/hellooozhangwen.github.io/issues";
            $.get(url,function(all){
                     //setTimeout("console.log('正在获取信息')",30000);
                console.log(all.length);
                     //var str=all["responseText"];
                      //string to json
                     // var arr=JSON.parse(str);
                for (i=0;i<all.length;++i){
                      var path=all[i]["html_url"];
                      var t=all[i]["title"];
                      var b=all[i]["body"];
                      var ctime=all[i]["created_at"];
                      console.log(path+"/n"+t+"/n"+b+"/n");
                      //获取留言
                      if(all[i]["comments"]){
                          $.get(all[0]["comments_url"],function(data){
                              console.log(data[0]["body"]);
                              console.log(data[1]["body"]);
                          })
                      }
                      add_log(path,t+"<p>"+ctime+"</p>");
                }      
            });
        }
        
        var play=true;
        $(document).keyup(function(event){
                switch(event.keyCode) {
                    case 27:
                   // alert("ESC");
                   $("audio#mp3").eq(0).toggle(); //css("display","none"); 
                   if(play){
                       $("audio#mp3")[0].pause();
                       show("可以用ESC键显示音乐");
                    }else{
                        $("audio#mp3")[0].play();
                        show("可以用ESC键隐藏音乐");
                    }
                    play=!play;
                    break;
                    //case 96:
                   //  alert("ESC");
                }
        });
        
        function show(msg){
                //  if(!$("#show").length) {
                msg="<h1 style='color: #0000cc;text-align: center;position: absolute;top: 45%;left: 30%' >"+msg+"</h1>";
                var tag = '<div id=show style="height: 100%;width: 100%;text-align: center;background-color: orangered;position: fixed;top: 0%;left: 0%;display: none;opacity: .7 " >' + msg + "</div>";
                $('body').append(tag);
                // }
               $("#show").toggle();  //显示id为show的标签内容
                setTimeout("$('#show').toggle()",1000);
                //1秒后再隐藏
                 setTimeout('$("#show").remove()',1500);
                 //1.5秒后移除
        }
        
    </script>
</head>

<body >
    
    <!--object data="music/包美圣 - 小茉莉.mp3" heigth="3" width="600" >
    <param name="autoplay" value="auto">
        
    </object-->
    <!--bgsound src="music/包美圣 - 小茉莉.mp3" loop="3" /-->
    <!--EMBED src="music/包美圣 - 小茉莉.mp3" autostart="true" loop=3 width="100" height="2"--> 
    <audio id="mp3" controls="controls" autoplay="autoplay" loop=true  >
        <source src="music/包美圣 - 小茉莉.mp3" type="audio/mpeg">
    </audio>
    <span id="mp3_help" >可以用ESC键控制</span>
    
<h1 style="text-align: center;color: orangered;display:none" >保持冷静，不断向前</h1>
<div id="switch_jpg">
    <img  id="rock" style="width: 620px;height: 410px;" src="2012.jpg">
</div>
<div id="talk" style="display:none">
    <p>say something to me</p>
    <input id="say"  type="text" style="width: 60%" placeholder="baby,say something to me" onkeypress="if(event.keyCode == 13){add_say()}" />
    <input type="button" onclick="read_mem()" value="加载留言" />
</div>
<!--div id="log" onload="read_mem()" ></div-->
<div id="log" onload="" ></div>
<iframe id="tit" src="some_log/1.html" style="width:70%;display:none" onload="get_iframe_title(this.id)"></iframe>
<iframe id="txt" src="some_log/see sea.txt" style="width:70%;display:none" onload="get_iframe_title(this.id)" ></iframe> 
<!--iframe id="test" src="some_log/see sea.txt" style="width:70%;display:none"  ></iframe--> 


<section id="comments">
   <!-- 多说评论框 start -->
<div id="ds-thread" class="ds-thread" data-thread-key="index" data-title="hello zhangwen" data-url="https://hellooozhangwen.github.io/index.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"zhangw3n"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
  </section>

</body>

</html>
